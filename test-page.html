<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test page</title>
    <script src="js/jquery-3.1.0.min.js"></script>

</head>
<body>
<input type="button" id="btn" value="Get all publications">
<input type="button" id="btnClear" value="Clear">
<ul id="ulEmployees"></ul>



<script>
    $('document').ready(function () {

        var requestUrl = "http://ip-api.com/json";

        $.ajax({
            url: requestUrl,
            type: 'GET',
            success: function(json)
            {
                console.log("My city is: " + json.city);
                console.log("My country is: " + json.country);
            },
            error: function(err)
            {
                console.log("Request failed, error= " + err);
            }
        });



        //alert("Тука съм, бай Любене.");

        var ulEmployees = $('#ulEmployees');

        $('#btn').click(function() {
            $.ajax({
                crossOrigin: true,
                method: "GET",
                //url: "http://localhost:20430/api/publications",
                url: "http://techcopr-webapi.apphb.com/api/publications",
                dataType: "json",
                success: function (data) {
                    ulEmployees.empty();
                    $.each(data,
                        function (index, value) {
                            ulEmployees.append('<li>' + value.ID + '</li>');
                            ulEmployees.append('<li>' + value.Title + '</li>');
                        });
                },
                error: function (data, status) {
                    let errorMsg = 'Error: ' + JSON.stringify(data);
                    alert(errorMsg);
                }
            });
        });
    });
</script>
</body>
</html>